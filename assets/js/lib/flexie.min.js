var Flexie=function(win,doc){function trim(e){if(e){e=e.replace(LEADINGTRIM,EMPTY_STRING).replace(TRAILINGTRIM,EMPTY_STRING)}return e}function determineSelectorMethod(){var engines=ENGINES,method,engine,obj;for(engine in engines){if(engines.hasOwnProperty(engine)){obj=engines[engine];if(win[engine]&&!method){method=eval(obj.s.replace("*",engine));if(method){ENGINE=engine;break}}}}return method}function addEvent(e,t){e="on"+e;var n=win[e];if(typeof win[e]!=="function"){win[e]=t}else{win[e]=function(){if(n){n()}t()}}}function attachLoadMethod(handler){if(!ENGINE){LIBRARY=determineSelectorMethod()}var engines=ENGINES,method,caller,args,engine,obj;for(engine in engines){if(engines.hasOwnProperty(engine)){obj=engines[engine];if(win[engine]&&!method&&obj.m){method=eval(obj.m.replace("*",engine));caller=obj.c?eval(obj.c.replace("*",engine)):win;args=[];if(method&&caller){if(obj.p){args.push(obj.p)}args.push(handler);method.apply(caller,args);break}}}}if(!method){addEvent("load",handler)}}function buildSelector(e){var t=e.nodeName.toLowerCase();if(e.id){t+="#"+e.id}else if(e.FLX_DOM_ID){t+="["+FLX_DOM_ATTR+"='"+e.FLX_DOM_ID+"']"}return t}function setFlexieId(e){if(!e.FLX_DOM_ID){FLX_DOM_ID=FLX_DOM_ID+1;e.FLX_DOM_ID=FLX_DOM_ID;e.setAttribute(FLX_DOM_ATTR,e.FLX_DOM_ID)}}function buildSelectorTree(e){var t=[],n,r,i,s,o,u,a,f,l,c;e=e.replace(WHITESPACE_CHARACTERS,EMPTY_STRING);e=e.replace(/\s?(\{|\:|\})\s?/g,PLACEHOLDER_STRING);n=e.split(END_MUSTACHE);for(f in n){if(n.hasOwnProperty(f)){e=n[f];if(e){r=[e,END_MUSTACHE].join(EMPTY_STRING);i=/(\@media[^\{]+\{)?(.*)\{(.*)\}/.exec(r);if(i&&i[3]){s=i[2];o=i[3].split(";");a=[];for(l in o){if(o.hasOwnProperty(l)){c=o[l];u=c.split(":");if(u.length&&u[1]){a.push({property:u[0],value:u[1]})}}}if(s&&a.length){t.push({selector:s,properties:a})}}}}}return t}function findFlexboxElements(e){var t,n,r,i,s,o=/\s?,\s?/,u,a,f,l={},c={},h,p,d,v,m,g,y,b,w;u=function(e,t,n,r){var i,s,o,u;i={selector:trim(e),properties:[]};for(s=0,o=t.properties.length;s<o;s++){u=t.properties[s];i.properties.push({property:trim(u.property),value:trim(u.value)})}if(n&&r){i[n]=r}return i};a=function(e,t,n,r){var i=n&&r?l[e]:c[e],s,o,a,f,h,p,d;if(i){for(a=0,f=t.properties.length;a<f;a++){h=t.properties[a];for(p=0,d=i.properties.length;p<d;p++){o=i.properties[p];if(h.property===o.property){s=p;return false}}if(s){i.properties[s]=h}else{i.properties.push(h)}}if(n&&r){i[n]=r}}else{if(n&&r){l[e]=u(e,t,n,r)}else{c[e]=u(e,t,NULL,NULL)}}};for(h=0,p=e.length;h<p;h++){d=e[h];t=trim(d.selector).replace(o,",").split(o);for(v=0,m=t.length;v<m;v++){g=trim(t[v]);n=d.properties;for(y=0,b=n.length;y<b;y++){w=n[y];r=trim(w.property);i=trim(w.value);if(r){s=r.replace("box-",EMPTY_STRING);switch(s){case"display":if(i==="box"){a(g,d,NULL,NULL)}break;case"orient":case"align":case"direction":case"pack":a(g,d,NULL,NULL);break;case"flex":case"flex-group":case"ordinal-group":a(g,d,s,i);break}}}}}for(f in c){if(c.hasOwnProperty(f)){FLEX_BOXES.push(c[f])}}for(f in l){if(l.hasOwnProperty(f)){POSSIBLE_FLEX_CHILDREN.push(l[f])}}return{boxes:FLEX_BOXES,children:POSSIBLE_FLEX_CHILDREN}}function matchFlexChildren(e,t,n){var r,i,s=[],o,u,a,f,l,c,h;for(o=0,u=n.length;o<u;o++){a=n[o];if(a.selector){r=t(a.selector);r=r[0]?r:[r];if(r[0]){for(f=0,l=r.length;f<l;f++){c=r[f];if(c.nodeName!==UNDEFINED){switch(c.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:if(c.parentNode===e){setFlexieId(c);i={};for(h in a){if(a.hasOwnProperty(h)){i[h]=a[h]}}i.match=c;s.push(i)}break}}}}}else{setFlexieId(a);s.push({match:a,selector:buildSelector(a)})}}return s}function getParams(e){var t;for(t in e){if(e.hasOwnProperty(t)){e[t]=e[t]||DEFAULTS[t]}}return e}function buildFlexieCall(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m={},g,y,b,w="["+FLX_PARENT_ATTR+"]",E,S,x,T,N,C,k,L,A,O,M,_,D,P;if(!e){return}for(E=0,S=e.boxes.length;E<S;E++){x=e.boxes[E];x.selector=trim(x.selector);t=x.selector;n=x.properties;o=u=a=f=l=NULL;for(T=0,N=n.length;T<N;T++){C=n[T];r=trim(C.property);i=trim(C.value);if(r){s=r.replace("box-",EMPTY_STRING);switch(s){case"display":if(i==="box"){o=i}break;case"orient":u=i;break;case"align":a=i;break;case"direction":f=i;break;case"pack":l=i;break}}}c=LIBRARY;h=c(x.selector);h=h[0]?h:[h];for(T=0,N=h.length;T<N;T++){k=h[T];if(k.nodeType){setFlexieId(k);p=matchFlexChildren(k,c,e.children);b=t+" "+w;v={target:k,selector:t,properties:n,children:p,display:o,orient:u,align:a,direction:f,pack:l,nested:b};g=m[k.FLX_DOM_ID];if(g){for(L in v){if(v.hasOwnProperty(L)){i=v[L];switch(L){case"selector":if(i&&!(new RegExp(i)).test(g[L])){g[L]+=", "+i}break;case"children":for(A=0,O=v[L].length;A<O;A++){M=v[L][A];y=FALSE;for(_=0,D=g[L].length;_<D;_++){P=g[L][_];if(M.match.FLX_DOM_ID===P.match.FLX_DOM_ID){y=TRUE}}if(!y){g[L].push(M)}}break;default:if(i){g[L]=i}break}}}}else{m[k.FLX_DOM_ID]=getParams(v);m[k.FLX_DOM_ID].target.setAttribute(FLX_PARENT_ATTR,TRUE)}}}}DOM_ORDERED=LIBRARY(w);FLEX_BOXES={};for(E=0,S=DOM_ORDERED.length;E<S;E++){k=DOM_ORDERED[E];FLEX_BOXES[k.FLX_DOM_ID]=m[k.FLX_DOM_ID]}for(L in FLEX_BOXES){if(FLEX_BOXES.hasOwnProperty(L)){x=FLEX_BOXES[L];if(x.display==="box"){d=new FLX.box(x)}}}}function calcPx(e,t,n){var r=n.replace(n.charAt(0),n.charAt(0).toUpperCase()),i=e["offset"+r]||0,s,o,u;if(i){for(s=0,o=t.length;s<o;s++){u=parseFloat(e.currentStyle[t[s]]);if(!isNaN(u)){i-=u}}}return i}function getTrueValue(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;if(!PIXEL.test(i)&&NUMBER.test(i)){n=s.left;r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;s.left=i||0;i=s.pixelLeft+"px";s.left=n||0;e.runtimeStyle.left=r}return i}function unAuto(e,t,n){var r;switch(n){case"width":r=[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT];t=calcPx(e,r,n);break;case"height":r=[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM];t=calcPx(e,r,n);break;default:t=getTrueValue(e,n);break}return t}function getPixelValue(e,t,n){if(PIXEL.test(t)){return t}if(t==="auto"||t==="medium"){t=unAuto(e,t,n)}else{t=getTrueValue(e,n)}return t}function getComputedStyle(e,t,n){var r;if(e===UNDEFINED){return}if(win.getComputedStyle){r=win.getComputedStyle(e,NULL)[t]}else{if(SIZES.test(t)){r=getPixelValue(e,e&&e.currentStyle?e.currentStyle[t]:0,t)}else{r=e.currentStyle[t]}}if(n){r=parseInt(r,10);if(isNaN(r)){r=0}}return r}function clientWidth(e){return e.innerWidth||e.clientWidth}function clientHeight(e){return e.innerHeight||e.clientHeight}function appendProperty(e,t,n,r){var i=[],s,o,u;for(s=0,o=PREFIXES.length;s<o;s++){u=PREFIXES[s];i.push((r?u:EMPTY_STRING)+t+":"+(!r?u:EMPTY_STRING)+n)}e.style.cssText+=i.join(";");return e}function appendPixelValue(e,t,n){var r=e&&e[0]?e:[e],i,s;for(i=0,s=r.length;i<s;i++){e=r[i];if(e&&e.style){e.style[t]=n?n+"px":EMPTY_STRING}}}function calculateSpecificity(e){var t,n,r,i,s,o;t=e.replace(CSS_SELECTOR,function(e,t){return"%"+t}).replace(/\s|\>|\+|\~/g,"%").split(/%/g);n={_id:100,_class:10,_tag:1};r=0;for(i=0,s=t.length;i<s;i++){o=t[i];if(/#/.test(o)){r+=n._id}else if(/\.|\[|\:/.test(o)){r+=n._class}else if(/[a-zA-Z]+/.test(o)){r+=n._tag}}return r}function filterDuplicates(e,t,n){var r=[],i,s=(n?"ordinal":"flex")+"Specificity",o,u,a,f,l,c;for(o=0,u=e.length;o<u;o++){a=e[o];if(!n&&a.flex||n&&a["ordinal-group"]){a[s]=a[s]||calculateSpecificity(a.selector);i=FALSE;for(f=0,l=r.length;f<l;f++){c=r[f];if(c.match===a.match){if(c[s]<a[s]){r[u]=a}i=TRUE;return FALSE}}if(!i){r.push(a)}}}return r}function createMatchMatrix(e,t,n){var r={},i=[],s=0,o,u="ordinal-group",a="data-"+u,f,l,c,h,p,d,v;e=filterDuplicates(e,t,n);for(f=0,l=t.length;f<l;f++){c=t[f];for(h=0,p=e.length;h<p;h++){d=e[h];if(n){o=d[u]||"1";if(d.match===c){d.match.setAttribute(a,o);r[o]=r[o]||[];r[o].push(d)}}else{o=d.flex||"0";if(d.match===c&&(!d[o]||d[o]&&parseInt(d[o],10)<=1)){s+=parseInt(o,10);r[o]=r[o]||[];r[o].push(d)}}}if(n&&!c.getAttribute(a)){o="1";c.setAttribute(a,o);r[o]=r[o]||[];r[o].push({match:c})}}for(v in r){if(r.hasOwnProperty(v)){i.push(v)}}i.sort(function(e,t){return t-e});return{keys:i,groups:r,total:s}}function attachResizeListener(e,t){if(!RESIZE_LISTENER){var n,r,i,s,o=doc.body,u=doc.documentElement,a,f="innerWidth",l="innerHeight",c="clientWidth",h="clientHeight";addEvent("resize",function(){if(a){window.clearTimeout(a)}a=window.setTimeout(function(){i=win[f]||u[f]||u[c]||o[c];s=win[l]||u[l]||u[h]||o[h];if(n!==i||r!==s){FLX.updateInstance(NULL,NULL);n=i;r=s}},250)});RESIZE_LISTENER=TRUE}}function cleanPositioningProperties(e){var t,n,r,i,s;for(t=0,n=e.length;t<n;t++){r=e[t];i=r.style.width;s=r.style.height;r.style.cssText=EMPTY_STRING;r.style.width=i;r.style.height=s}}function sanitizeChildren(e,t){var n=[],r,i,s;for(i=0,s=t.length;i<s;i++){r=t[i];if(r){switch(r.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:if(r.nodeType===1){n.push(r)}else if(r.nodeType===3&&(r.isElementContentWhitespace||ONLY_WHITESPACE.test(r.data))){e.removeChild(r);i--}break}}}return n}function parentFlex(e){var t=0,n=e.parentNode,r,i,s;while(n.FLX_DOM_ID){r=FLEX_BOXES[n.FLX_DOM_ID];i=createMatchMatrix(r.children,sanitizeChildren(n,n.childNodes),NULL);t+=i.total;s=TRUE;n=n.parentNode}return{nested:s,flex:t}}function dimensionValues(e,t){var n=e.parentNode,r,i,s,o,u;if(n.FLX_DOM_ID){r=FLEX_BOXES[n.FLX_DOM_ID];for(s=0,o=r.properties.length;s<o;s++){u=r.properties[s];if((new RegExp(t)).test(u.property)){i=TRUE;return FALSE}}}return i}function updateChildValues(e){var t,n,r;if(e.flexMatrix){for(t=0,n=e.children.length;t<n;t++){r=e.children[t];r.flex=e.flexMatrix[t]}}if(e.ordinalMatrix){for(t=0,n=e.children.length;t<n;t++){r=e.children[t];r["ordinal-group"]=e.ordinalMatrix[t]}}return e}function ensureStructuralIntegrity(e,t){var n=e.target;if(!n.FLX_DOM_ID){n.FLX_DOM_ID=n.FLX_DOM_ID||++FLX_DOM_ID}if(!e.nodes){e.nodes=sanitizeChildren(n,n.childNodes)}if(!e.selector){e.selector=buildSelector(n);n.setAttribute(FLX_PARENT_ATTR,TRUE)}if(!e.properties){e.properties=[]}if(!e.children){e.children=matchFlexChildren(n,LIBRARY,sanitizeChildren(n,n.childNodes))}if(!e.nested){e.nested=e.selector+" ["+FLX_PARENT_ATTR+"]"}e.target=n;e._instance=t;return e}var FLX={},FLX_DOM_ID=0,FLX_DOM_ATTR="data-flexie-id",FLX_PARENT_ATTR="data-flexie-parent",SUPPORT,ENGINE,ENGINES={NW:{s:"*.Dom.select"},DOMAssistant:{s:"*.$",m:"*.DOMReady"},Prototype:{s:"$$",m:"document.observe",p:"dom:loaded",c:"document"},YAHOO:{s:"*.util.Selector.query",m:"*.util.Event.onDOMReady",c:"*.util.Event"},MooTools:{s:"$$",m:"window.addEvent",p:"domready"},Sizzle:{s:"*"},jQuery:{s:"*",m:"*(document).ready"},dojo:{s:"*.query",m:"*.addOnLoad"}},LIBRARY,PIXEL=/^-?\d+(?:px)?$/i,NUMBER=/^-?\d/,SIZES=/width|height|margin|padding|border/,MSIE=/(msie) ([\w.]+)/,WHITESPACE_CHARACTERS=/\t|\n|\r/g,RESTRICTIVE_PROPERTIES=/^max\-([a-z]+)/,PROTOCOL=/^https?:\/\//i,LEADINGTRIM=/^\s\s*/,TRAILINGTRIM=/\s\s*$/,ONLY_WHITESPACE=/^\s*$/,CSS_SELECTOR=/\s?(\#|\.|\[|\:(\:)?[^first\-(line|letter)|before|after]+)/g,EMPTY_STRING="",SPACE_STRING=" ",PLACEHOLDER_STRING="$1",PADDING_RIGHT="paddingRight",PADDING_BOTTOM="paddingBottom",PADDING_LEFT="paddingLeft",PADDING_TOP="paddingTop",BORDER_RIGHT="borderRightWidth",BORDER_BOTTOM="borderBottomWidth",BORDER_LEFT="borderLeftWidth",BORDER_TOP="borderTopWidth",HORIZONTAL="horizontal",VERTICAL="vertical",INLINE_AXIS="inline-axis",BLOCK_AXIS="block-axis",INHERIT="inherit",LEFT="left",END_MUSTACHE="}",PREFIXES=" -o- -moz- -ms- -webkit- -khtml- ".split(SPACE_STRING),DEFAULTS={orient:HORIZONTAL,align:"stretch",direction:INHERIT,pack:"start"},FLEX_BOXES=[],POSSIBLE_FLEX_CHILDREN=[],DOM_ORDERED,RESIZE_LISTENER,TRUE=true,FALSE=false,NULL=null,UNDEFINED,BROWSER={IE:function(){var e,t=win.navigator.userAgent,n=MSIE.exec(t.toLowerCase());if(n){e=parseInt(n[2],10)}return e}()},selectivizrEngine;selectivizrEngine=function(){function a(e){return e.replace(u,PLACEHOLDER_STRING)}function f(e){return a(e).replace(o,SPACE_STRING)}function l(e){return f(e.replace(i,PLACEHOLDER_STRING).replace(s,PLACEHOLDER_STRING))}function c(e){return e.replace(r,function(e,t,n){var r,i,s,o,u;r=n.split(",");for(s=0,o=r.length;s<o;s++){u=r[s];i=l(u)+SPACE_STRING}return t+r.join(",")})}function h(){if(win.XMLHttpRequest){return new win.XMLHttpRequest}try{return new win.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return NULL}}function p(e){var t=/<style[^<>]*>([^<>]*)<\/style[\s]?>/img,n=t.exec(e),r=[],i;while(n){i=n[1];if(i){r.push(i)}n=t.exec(e)}return r.join("\n\n")}function d(e){var t=h(),n;t.open("GET",e,FALSE);t.send();n=t.status===200?t.responseText:EMPTY_STRING;if(e===window.location.href){n=p(n)}return n}function v(e,t){function n(e){return e.substring(0,e.indexOf("/",8))}if(!e){return}if(PROTOCOL.test(e)){return n(t)===n(e)?e:NULL}if(e.charAt(0)==="/"){return n(t)+e}var r=t.split("?")[0];if(e.charAt(0)!=="?"&&r.charAt(r.length-1)!=="/"){r=r.substring(0,r.lastIndexOf("/")+1)}return r+e}function m(r){if(r){return d(r).replace(e,EMPTY_STRING).replace(t,function(e,t,n,i,s,o){var u=m(v(n||s,r));return o?"@media "+o+" {"+u+"}":u}).replace(n,function(e,t,n,i){n=n||EMPTY_STRING;return t?e:" url("+n+v(i,r,true)+n+") "})}return EMPTY_STRING}var e=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,t=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))\s*([^;]*);/g,n=/(behavior\s*?:\s*)?\burl\(\s*(["']?)(?!data:)([^"')]+)\2\s*\)/g,r=/((?:^|(?:\s*\})+)(?:\s*@media[^\{]+\{)?)\s*([^\{]*?[\[:][^{]+)/g,i=/([(\[+~])\s+/g,s=/\s+([)\]+~])/g,o=/\s+/g,u=/^\s*((?:[\S\s]*\S)?)\s*$/;return function(){var e,t=[],n,r,i,s=doc.getElementsByTagName("BASE"),o=s.length>0?s[0].href:doc.location.href,u=doc.styleSheets,a,f,l;for(r=0,i=u.length;r<i;r++){n=u[r];if(n!=NULL){t.push(n)}}t.push(window.location);for(r=0,i=t.length;r<i;r++){n=t[r];if(n){e=v(n.href,o);if(e){a=c(m(e))}if(a){f=buildSelectorTree(a);l=findFlexboxElements(f)}}}buildFlexieCall(l)}}();FLX.box=function(e){return this.renderModel(e)};FLX.box.prototype={properties:{boxModel:function(e,t,n){var r,i,s,o,u,a,f;e.style.display="block";if(BROWSER.IE===8){e.style.overflow="hidden"}if(!n.cleared){r=n.selector.split(/\s?,\s?/);i=doc.styleSheets;i=i[i.length-1];s="padding-top:"+(getComputedStyle(e,PADDING_TOP,NULL)||"0.1px;");o=["content: '.'","display: block","height: 0","overflow: hidden"].join(";");for(u=0,a=r.length;u<a;u++){f=r[u];if(i.addRule){if(BROWSER.IE<8){e.style.zoom="1";if(BROWSER.IE===6){i.addRule(f.replace(/\>|\+|\~/g,""),s+"zoom:1;",0)}else if(BROWSER.IE===7){i.addRule(f,s+"display:inline-block;",0)}}else{i.addRule(f,s,0);i.addRule(f+":before",o,0);i.addRule(f+":after",o+";clear:both;",0)}}else if(i.insertRule){i.insertRule(f+"{"+s+"}",0);i.insertRule(f+":after{"+o+";clear:both;}",0)}}n.cleared=TRUE}},boxDirection:function(e,t,n){var r,i,s,o,u,a;if(n.direction==="reverse"&&!n.reversed||n.direction==="normal"&&n.reversed){t=t.reverse();for(s=0,o=t.length;s<o;s++){u=t[s];e.appendChild(u)}r=LIBRARY(n.nested);for(s=0,o=r.length;s<o;s++){a=r[s];i=FLEX_BOXES[a.FLX_DOM_ID];if(i&&i.direction===INHERIT){i.direction=n.direction}}n.reversed=!n.reversed}},boxOrient:function(e,t,n){var r=this,i,s,o,u,a;i={pos:"marginLeft",opp:"marginRight",dim:"width",out:"offsetWidth",func:clientWidth,pad:[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT]};s={pos:"marginTop",opp:"marginBottom",dim:"height",out:"offsetHeight",func:clientHeight,pad:[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM]};if(!SUPPORT){for(o=0,u=t.length;o<u;o++){a=t[o];a.style[BROWSER.IE>=9?"cssFloat":"styleFloat"]=LEFT;if(n.orient===VERTICAL||n.orient===BLOCK_AXIS){a.style.clear=LEFT}if(BROWSER.IE===6){a.style.display="inline"}}}switch(n.orient){case VERTICAL:case BLOCK_AXIS:r.props=s;r.anti=i;break;default:r.props=i;r.anti=s;break}},boxOrdinalGroup:function(e,t,n){var r,i;if(!t.length){return}r=function(r){var i=r.keys,s=n.reversed?i:i.reverse(),o,u,a,f,l,c;for(o=0,u=s.length;o<u;o++){a=s[o];for(f=0,l=t.length;f<l;f++){c=t[f];if(a===c.getAttribute("data-ordinal-group")){e.appendChild(c)}}}};i=createMatchMatrix(n.children,t,TRUE);if(i.keys.length>1){r(i)}},boxFlex:function(e,t,n){var r=this,i,s,o,u,a,f,l;if(!t.length){return}i=function(e){var t=e.groups,n=e.keys,i,s,o,u,a,f,l,c,h,p;for(s=0,o=n.length;s<o;s++){u=n[s];for(a=0,f=t[u].length;a<f;a++){l=t[u][a];i=NULL;for(c=0,h=l.properties.length;c<h;c++){p=l.properties[c];if(RESTRICTIVE_PROPERTIES.test(p.property)){i=parseFloat(p.value)}}if(!i||l.match[r.props.out]>i){appendPixelValue(l.match,r.props.pos,NULL)}}}};s=function(n){var i=0,s,o,u,a,f,l,c,h;for(u=0,a=t.length;u<a;u++){f=t[u];i+=getComputedStyle(f,r.props.dim,TRUE);for(l=0,c=r.props.pad.length;l<c;l++){h=r.props.pad[l];i+=getComputedStyle(f,h,TRUE)}i+=getComputedStyle(f,r.props.pos,TRUE);i+=getComputedStyle(f,r.props.opp,TRUE)}s=e[r.props.out]-i;for(u=0,a=r.props.pad.length;u<a;u++){h=r.props.pad[u];s-=getComputedStyle(e,h,TRUE)}o=s/n.total;return{whitespace:s,ration:o}};o=function(e,t){var n=e.groups,i=e.keys,s,o,u=t.ration,a,f,l,c,h,p,d,v,m;for(c=0,h=i.length;c<h;c++){p=i[c];a=u*p;for(d=0,v=n[p].length;d<v;d++){m=n[p][d];if(m.match){s=m.match.getAttribute("data-flex");o=m.match.getAttribute("data-specificity");if(!s||o<=m.flexSpecificity){m.match.setAttribute("data-flex",p);m.match.setAttribute("data-specificity",m.flexSpecificity);f=getComputedStyle(m.match,r.props.dim,TRUE);l=Math.max(0,f+a);appendPixelValue(m.match,r.props.dim,l)}}}}};u=createMatchMatrix(n.children,t,NULL);if(u.total){n.hasFlex=TRUE;a=i(u);f=s(u);l=o(u,f)}},boxAlign:function(e,t,n){var r=this,i,s,o=parentFlex(e),u,a,f,l,c,h;if(!SUPPORT&&!o.flex&&(n.orient===VERTICAL||n.orient===BLOCK_AXIS)){if(!dimensionValues(e,r.anti.dim)){appendPixelValue(e,r.anti.dim,NULL)}appendPixelValue(t,r.anti.dim,NULL)}i=e[r.anti.out];for(u=0,a=r.anti.pad.length;u<a;u++){f=r.anti.pad[u];i-=getComputedStyle(e,f,TRUE)}switch(n.align){case"start":break;case"end":for(u=0,a=t.length;u<a;u++){h=t[u];s=i-h[r.anti.out];s-=getComputedStyle(h,r.anti.opp,TRUE);appendPixelValue(h,r.anti.pos,s)}break;case"center":for(u=0,a=t.length;u<a;u++){h=t[u];s=(i-h[r.anti.out])/2;appendPixelValue(h,r.anti.pos,s)}break;default:for(u=0,a=t.length;u<a;u++){h=t[u];switch(h.nodeName.toLowerCase()){case"button":case"input":case"select":break;default:var p=0;for(l=0,c=r.anti.pad.length;l<c;l++){f=r.anti.pad[l];p+=getComputedStyle(h,f,TRUE);p+=getComputedStyle(e,f,TRUE)}h.style[r.anti.dim]="100%";s=h[r.anti.out]-p;appendPixelValue(h,r.anti.dim,NULL);s=i;s-=getComputedStyle(h,r.anti.pos,TRUE);for(l=0,c=r.anti.pad.length;l<c;l++){f=r.anti.pad[l];s-=getComputedStyle(h,f,TRUE)}s-=getComputedStyle(h,r.anti.opp,TRUE);s=Math.max(0,s);appendPixelValue(h,r.anti.dim,s);break}}break}},boxPack:function(e,t,n){var r=this,i=0,s=0,o=0,u,a,f,l,c=t.length-1,h,p,d,v,m;for(p=0,d=t.length;p<d;p++){h=t[p];i+=h[r.props.out];i+=getComputedStyle(h,r.props.pos,TRUE);i+=getComputedStyle(h,r.props.opp,TRUE)}s=getComputedStyle(t[0],r.props.pos,TRUE);u=e[r.props.out]-i;for(p=0,d=r.props.pad.length;p<d;p++){m=r.props.pad[p];u-=getComputedStyle(e,m,TRUE)}if(u<0){u=Math.max(0,u)}switch(n.pack){case"end":appendPixelValue(t[0],r.props.pos,o+s+u);break;case"center":if(o){o/=2}appendPixelValue(t[0],r.props.pos,o+s+Math.floor(u/2));break;case"justify":a=Math.floor((o+u)/c);l=a*c-u;p=t.length-1;while(p){h=t[p];f=a;if(l){f++;l++}v=getComputedStyle(h,r.props.pos,TRUE)+f;appendPixelValue(h,r.props.pos,v);p--}break}e.style.overflow=""}},setup:function(e,t,n){var r=this,i,s,o,u;if(!e||!t||!n){return}if(SUPPORT&&SUPPORT.partialSupport){i=createMatchMatrix(n.children,t,NULL);s=parentFlex(e);t=sanitizeChildren(e,e.childNodes);r.properties.boxOrient.call(r,e,t,n);if(!i.total||!LIBRARY(n.nested).length){if(n.align==="stretch"&&!SUPPORT.boxAlignStretch&&(!s.nested||!s.flex)){r.properties.boxAlign.call(r,e,t,n)}if(n.pack==="justify"&&!SUPPORT.boxPackJustify&&!i.total){r.properties.boxPack.call(r,e,t,n)}}}else if(!SUPPORT){for(o in r.properties){if(r.properties.hasOwnProperty(o)){u=r.properties[o];u.call(r,e,sanitizeChildren(e,e.childNodes),n)}}}},trackDOM:function(e){attachResizeListener(this,e)},updateModel:function(e){var t=this,n=e.target,r=e.nodes;cleanPositioningProperties(r);if(e.flexMatrix||e.ordinalMatrix){e=updateChildValues(e)}t.setup(n,r,e);t.bubbleUp(n,e)},renderModel:function(e){var t=this,n=e.target,r=n.childNodes;if(!n.length&&!r){return false}e=ensureStructuralIntegrity(e,this);t.updateModel(e);win.setTimeout(function(){t.trackDOM(e)},0);return t},bubbleUp:function(e,t){var n=this,r,i=t.target.parentNode;while(i){r=FLEX_BOXES[i.FLX_DOM_ID];if(r){cleanPositioningProperties(r.nodes);n.setup(r.target,r.nodes,r)}i=i.parentNode}}};FLX.updateInstance=function(e,t){var n,r;if(e){n=FLEX_BOXES[e.FLX_DOM_ID];if(n&&n._instance){n._instance.updateModel(n)}else if(!n){n=new FLX.box(t)}}else{for(r in FLEX_BOXES){if(FLEX_BOXES.hasOwnProperty(r)){n=FLEX_BOXES[r];if(n&&n._instance){n._instance.updateModel(n)}}}}};FLX.getInstance=function(e){return FLEX_BOXES[e.FLX_DOM_ID]};FLX.destroyInstance=function(e){var t,n,r,i,s,o;n=function(e){e.target.FLX_DOM_ID=NULL;e.target.style.cssText=EMPTY_STRING;for(r=0,i=e.children.length;r<i;r++){s=e.children[r];s.match.style.cssText=EMPTY_STRING}};if(e){t=FLEX_BOXES[e.FLX_DOM_ID];if(t){n(t)}}else{for(o in FLEX_BOXES){if(FLEX_BOXES.hasOwnProperty(o)){n(FLEX_BOXES[o])}}FLEX_BOXES=[]}};FLX.flexboxSupport=function(){var e={},t=100,n,r=doc.createElement("flxbox"),i='<b style="margin: 0; padding: 0; display:block; width: 10px; height:'+t/2+'px"></b>',s,o,u,a;r.style.width=r.style.height=t+"px";r.innerHTML=i+i+i;appendProperty(r,"display","box",NULL);appendProperty(r,"box-align","stretch",TRUE);appendProperty(r,"box-pack","justify",TRUE);doc.body.appendChild(r);n=r.firstChild.offsetHeight;s={boxAlignStretch:function(){return n===100},boxPackJustify:function(){var e=0,t,n;for(t=0,n=r.childNodes.length;t<n;t++){e+=r.childNodes[t].offsetLeft}return e===135}};for(u in s){if(s.hasOwnProperty(u)){a=s[u];o=a();if(!o){e.partialSupport=TRUE}e[u]=o}}doc.body.removeChild(r);return~r.style.display.indexOf("box")?e:FALSE};FLX.init=function(){FLX.flexboxSupported=SUPPORT=FLX.flexboxSupport();if((!SUPPORT||SUPPORT.partialSupport)&&LIBRARY){selectivizrEngine()}};FLX.version="1.0.3";attachLoadMethod(FLX.init);return FLX}(this,document)